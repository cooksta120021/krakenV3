<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1000px; margin: 0 auto; padding: 20px; background: #0b1220; color: #e8eefc; }
        .card { background: #141c2f; border: 1px solid #1f2a44; border-radius: 8px; padding: 16px; margin-bottom: 16px; }
        h1, h2 { color: #f5f7ff; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 6px 8px; border-bottom: 1px solid #1f2a44; font-size: 13px; text-align: left; }
    </style>
</head>
<body>
    <h1>Admin Dashboard</h1>
    <div class="card">
        <h2>Audit Logs (latest 50)</h2>
        <table>
            <thead><tr><th>When</th><th>Action</th><th>Target</th><th>Metadata</th></tr></thead>
            <tbody>
            {% for log in audit_logs %}
            <tr>
                <td>{{ log.created_at }}</td>
                <td>{{ log.action }}</td>
                <td>{{ log.target_type }} #{{ log.target_id }}</td>
                <td>{{ log.metadata }}</td>
            </tr>
            {% empty %}<tr><td colspan="4">No logs yet.</td></tr>{% endfor %}
            </tbody>
        </table>
    </div>

    <div class="card">
        <h2>Strategy Decisions (latest 50)</h2>
        <table>
            <thead><tr><th>When</th><th>Vault</th><th>Sleeve</th><th>Action</th><th>Confidence</th><th>Metadata</th></tr></thead>
            <tbody>
            {% for d in decisions %}
            <tr>
                <td>{{ d.created_at }}</td>
                <td>{{ d.sleeve.vault.asset }}/{{ d.sleeve.vault.quote_asset }}</td>
                <td>{{ d.sleeve.sleeve_type }}</td>
                <td>{{ d.action }}</td>
                <td>{{ d.confidence|default:"" }}</td>
                <td>{{ d.metadata }}</td>
            </tr>
            {% empty %}<tr><td colspan="6">No decisions yet.</td></tr>{% endfor %}
            </tbody>
        </table>
    </div>
</body>
</html>
